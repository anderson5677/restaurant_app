{% extends "base.html" %}

{% block title %}Home | Anderson Foods{% endblock %}

{% block content %}
<input
    type="text"
    id="menuSearch"
    placeholder="Search menu...."
    class="menu-search"
    onkeyup="filterMenu()"
/>
<h1 class="page-title">Our Menu</h1>

<div class="menu-grid">
    {% for food in foods %}
    <div class="menu-card" data-name="{{ food.name }} {{ food.description }}">
       <img 
    src="{{ url_for('static', filename='images/menu/' ~ food.image) }}"
    alt="{{ food.name }}"
    class="menu-image"
    onerror="this.src='/static/images/menu/default.jpg'">
        
            <h3>{{ food.name }}</h3>
            <p class="description">{{ food.description }}</p>
            <p class="price">GHS {{ food.price }}</p>
            
            <form action="{{ url_for('add_to_cart', item_id=food.id) }}" method="get">
                <div class="qty-box">
                    <button type="button" onclick="this.nextElementSibiling.stepDown()">-</button>
                    <input type="number" name="qty" value="1" min="1">
                    <button type="button" onclick="this.previousElementSiblings.stepUp()">+</button>
                </div>
                <a href="{{ url_for('add_to_cart', item_id=food.id) }}?qty=1">
                <button type="submit" class="btn-primary">Add to Cart</button>
            </form>
            </a>
        </div>
    {% endfor %}
</div>
<script>
function filterMenu() {
    const input = document.getElementById("menuSearch").value.toLowerCase();
    const cards = document.querySelectorAll(".menu-card");

    cards.forEach(card => {
        const text = card.getAttribute("data-name").toLowerCase();
        if (text.includes(input)) {
            card.style.display = "block";
        } else {
            card.style.display = "none";
        }
    });
}
</script>
{% endblock %}